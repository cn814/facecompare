<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Face Comparison Tool â€” Multi-Reference</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous">
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin="anonymous">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" crossorigin="anonymous"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js" crossorigin="anonymous"></script>
</head>
<body>
  <div class="container">
    <h1>ðŸŽ­ Face Comparison Tool</h1>
    <p class="subtitle">Compare faces locally in your browser â€” private and fast.</p>

    <div id="loadingStatus" class="loading">
      <h3>Loading AI Models...</h3>
      <p id="loadingText">Preparing face detection models</p>
      <div class="loading-bar"><div id="loadingProgress" class="loading-progress"></div></div>
    </div>

    <div id="mainApp" class="hidden">
      <div class="upload-controls">
        <div class="box">
          <h2>Reference Photo(s)</h2>
          <p class="helper-text">Upload 1-5 photos of the same person for better accuracy</p>
          <div id="uploadArea1" class="upload-area" data-target="1">
            <input id="fileInput1" type="file" accept="image/*" multiple>
            <div class="prompt">ðŸ“¸ Click or drop reference image(s)</div>
            <div id="preview1" class="preview"></div>
          </div>
          <div id="referenceInfo" class="reference-info hidden">
            <p><strong>Reference photos loaded:</strong> <span id="refCount">0</span></p>
            <label class="method-selector">
              <span>Matching method:</span>
              <select id="matchMethod">
                <option value="average">Average (recommended)</option>
                <option value="best">Best match</option>
                <option value="median">Median</option>
              </select>
            </label>
          </div>
        </div>

        <div class="box">
          <h2>Comparison Photo(s)</h2>
          <div id="uploadArea2" class="upload-area" data-target="2">
            <input id="fileInput2" type="file" accept="image/*" multiple>
            <div class="prompt">ðŸ“· Click or drop one or more images</div>
            <div id="preview2" class="preview"></div>
          </div>
        </div>
      </div>

      <div class="controls-row">
        <button id="clearBtn" class="btn secondary">Clear All</button>
        <label class="toggle"><input id="debugToggle" type="checkbox"> Show debugging overlays</label>
        <button id="compareBtn" class="btn primary" disabled>Upload Photos to Compare</button>
      </div>

      <div id="results" class="results hidden"></div>
    </div>

  </div>

  <!-- Templates -->
  <template id="resultItemTpl">
    <div class="result-item">
      <h4 class="title"></h4>
      <div class="similarity-score"></div>
      <div class="progress-bar"><div class="progress-fill"></div></div>
      <p class="details"></p>
    </div>
  </template>

  <!-- Load face-api from CDN and then our modules -->
  <script defer src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js" crossorigin="anonymous"></script>
  <script type="module" src="js/main.js"></script>
</body>
</html>
